---
// UserWelcome component that displays user info from JWT middleware context
import avatarImage from "../assets/avatar.png";
const { jwt } = Astro.locals;
---

<div class="bg-base-200 border-b border-base-300">
  <div class="container mx-auto max-w-7xl px-6 py-4">
    <div class="flex items-center justify-between">
      <div class="flex items-center gap-3">
        {jwt ? (
          <>
            <div class="avatar">
              <div class="w-10 rounded-full">
                <img src={avatarImage.src} alt={`${jwt.username} avatar`} />
              </div>
            </div>
            <div class="flex flex-col">
              <span class="text-base font-medium">Welcome, {jwt.username}!</span>
              <span class="text-sm text-base-content/70">{jwt.role} â€¢ {jwt.email}</span>
            </div>
          </>
        ) : (
          <div class="flex items-center gap-2">
            <div class="w-10 h-10 rounded-full bg-base-300 flex items-center justify-center">
              <span class="text-sm text-base-content/50">?</span>
            </div>
            <span class="text-base text-base-content/70">Anonymous User</span>
          </div>
        )}
      </div>
      
      <div class="flex items-center gap-2 text-sm text-base-content/50">
        {jwt ? (
          <div class="badge badge-success badge-sm">
            JWT Active
          </div>
        ) : (
          <div class="badge badge-warning badge-sm">
            No JWT
          </div>
        )}
        {jwt && (
          <div class="badge badge-outline badge-sm">
            Last login: {new Date().toLocaleDateString()}
          </div>
        )}
      </div>
    </div>
  </div>
</div>